<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XY2APK - Konversi HTML ke APK Tanpa Login</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“±</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== VARIABLES ===== */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a0ca3;
            --secondary: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #e63946;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --card-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --transition: all 0.3s ease;
        }

        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7ff 0%, #f0f2ff 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1.5rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-2px);
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--secondary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tagline {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
            font-weight: 300;
        }

        .header-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-status i {
            color: var(--success);
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            padding: 3rem 0;
            min-height: calc(100vh - 300px);
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== CONVERTER SECTION ===== */
        .converter-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 992px) {
            .converter-section {
                grid-template-columns: 1fr;
            }
        }

        .upload-area, .config-area {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(67, 97, 238, 0.1);
            transition: var(--transition);
        }

        .upload-area:hover, .config-area:hover {
            box-shadow: 0 12px 32px rgba(67, 97, 238, 0.15);
            transform: translateY(-5px);
        }

        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-light);
        }

        .section-title i {
            color: var(--secondary);
            background: rgba(247, 37, 133, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ===== UPLOAD AREA ===== */
        .file-upload {
            border: 3px dashed var(--primary);
            border-radius: var(--border-radius);
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1.5rem;
            background: rgba(67, 97, 238, 0.02);
            position: relative;
            overflow: hidden;
        }

        .file-upload::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(67, 97, 238, 0.1), transparent);
            transform: rotate(45deg);
            transition: var(--transition);
        }

        .file-upload:hover::before {
            left: 50%;
        }

        .file-upload:hover {
            background: rgba(67, 97, 238, 0.05);
            border-color: var(--secondary);
        }

        .file-upload i {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }

        .file-upload:hover i {
            transform: scale(1.1);
            color: var(--secondary);
        }

        .file-upload h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-size: 1.3rem;
        }

        .file-upload p {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .file-upload small {
            color: var(--gray);
            font-size: 0.85rem;
            opacity: 0.8;
        }

        #htmlFileInput, #iconFileInput {
            display: none;
        }

        /* ===== ICON PREVIEW ===== */
        .icon-preview {
            text-align: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background: var(--light);
            border-radius: var(--border-radius-sm);
            border: 2px dashed var(--gray-light);
        }

        #iconPreview img {
            width: 120px;
            height: 120px;
            border-radius: 25px;
            object-fit: cover;
            border: 4px solid var(--primary);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        #iconPreview img:hover {
            transform: rotate(5deg) scale(1.05);
            border-color: var(--secondary);
        }

        /* ===== CONFIGURATION ===== */
        .config-group {
            margin-bottom: 1.8rem;
            position: relative;
        }

        .config-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }

        .config-group label i {
            color: var(--primary);
            width: 20px;
            text-align: center;
        }

        .config-group input,
        .config-group select {
            width: 100%;
            padding: 1rem 1.2rem;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
            font-family: inherit;
        }

        .config-group input:focus,
        .config-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
            transform: translateY(-2px);
        }

        .config-group input:hover,
        .config-group select:hover {
            border-color: var(--primary);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 1rem 0;
            padding: 0.8rem;
            background: var(--light);
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
        }

        .checkbox-group:hover {
            background: rgba(67, 97, 238, 0.05);
            transform: translateX(5px);
        }

        .checkbox-group input {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .checkbox-group label {
            font-weight: 500;
            cursor: pointer;
            color: var(--dark);
            margin: 0;
            flex: 1;
        }

        .checkbox-group label i {
            margin-right: 8px;
            color: var(--gray);
        }

        /* ===== CONVERT BUTTON ===== */
        .convert-btn-container {
            text-align: center;
            margin: 3rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.05), rgba(247, 37, 133, 0.05));
            border-radius: var(--border-radius);
            border: 2px dashed var(--primary);
        }

        #convertBtn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 1.3rem 4rem;
            font-size: 1.3rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 8px 25px rgba(67, 97, 238, 0.3);
            position: relative;
            overflow: hidden;
        }

        #convertBtn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        #convertBtn:hover::before {
            left: 100%;
        }

        #convertBtn:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(67, 97, 238, 0.4);
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }

        #convertBtn:active:not(:disabled) {
            transform: translateY(-2px) scale(1.02);
        }

        #convertBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        #convertBtn i {
            font-size: 1.2rem;
            transition: var(--transition);
        }

        #convertBtn:hover i:not(.fa-spinner) {
            transform: rotate(180deg);
        }

        .convert-note {
            margin-top: 1.5rem;
            color: var(--gray);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: var(--border-radius-sm);
            border-left: 4px solid var(--success);
        }

        /* ===== RESULT SECTION ===== */
        .result-section {
            display: none;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                      linear-gradient(135deg, var(--primary), var(--success), var(--secondary)) border-box;
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-section.show {
            display: block;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--gray-light);
        }

        .result-header .section-title {
            margin: 0;
            padding: 0;
            border: none;
        }

        .success-badge {
            background: linear-gradient(135deg, var(--success), #3ab0d8);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(76, 201, 240, 0.3);
        }

        .result-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2.5rem;
            align-items: start;
        }

        @media (max-width: 768px) {
            .result-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        .apk-preview {
            text-align: center;
            padding: 1.5rem;
            background: var(--light);
            border-radius: var(--border-radius);
        }

        .apk-icon {
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            box-shadow: 0 10px 30px rgba(67, 97, 238, 0.3);
            transition: var(--transition);
            overflow: hidden;
        }

        .apk-icon:hover {
            transform: rotate(10deg) scale(1.05);
            box-shadow: 0 15px 40px rgba(67, 97, 238, 0.4);
        }

        .apk-icon i {
            font-size: 4rem;
            color: white;
        }

        .apk-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .apk-info {
            padding: 1rem 0;
        }

        .apk-info h3 {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .apk-info p {
            color: var(--gray);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .apk-info .version {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .apk-info .size {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            margin-top: 0.5rem;
        }

        .apk-info .size i {
            color: var(--success);
        }

        .result-actions {
            display: flex;
            gap: 15px;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 160px;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius-sm);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-decoration: none;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn.download {
            background: linear-gradient(135deg, var(--success), #3ab0d8);
            color: white;
            box-shadow: 0 6px 20px rgba(76, 201, 240, 0.3);
        }

        .action-btn.download:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(76, 201, 240, 0.4);
        }

        .action-btn.share {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.3);
        }

        .action-btn.share:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
        }

        .action-btn.new {
            background: var(--gray-light);
            color: var(--dark);
        }

        .action-btn.new:hover {
            background: var(--gray);
            color: white;
            transform: translateY(-3px);
        }

        .result-details {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.05), rgba(247, 37, 133, 0.05));
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-top: 1.5rem;
            border-left: 4px solid var(--primary);
        }

        .result-details h5 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .result-details ul {
            list-style: none;
            padding: 0;
        }

        .result-details li {
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px dashed var(--gray-light);
        }

        .result-details li:last-child {
            border-bottom: none;
        }

        .result-details strong {
            color: var(--dark);
            font-weight: 600;
        }

        .result-details span {
            color: var(--primary);
            font-weight: 500;
            text-align: right;
            max-width: 60%;
            word-break: break-word;
        }

        /* ===== FEATURES SECTION ===== */
        .features-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow);
            margin: 3rem 0;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            transition: var(--transition);
        }

        .feature-card:hover .feature-icon {
            transform: rotate(360deg) scale(1.1);
        }

        .feature-icon i {
            font-size: 2rem;
            color: white;
        }

        .feature-card h4 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .feature-card p {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* ===== FOOTER ===== */
        footer {
            background: linear-gradient(135deg, var(--dark), #343a40);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 3rem;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 3rem;
            margin-bottom: 2.5rem;
            position: relative;
            z-index: 1;
        }

        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-section h3 i {
            color: var(--secondary);
        }

        .footer-section p {
            color: #adb5bd;
            margin-bottom: 1.5rem;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .footer-section a {
            color: #adb5bd;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.8rem;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .footer-section a:hover {
            color: white;
            transform: translateX(5px);
        }

        .powered-by {
            color: var(--secondary);
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-bottom {
            border-top: 1px solid #495057;
            padding-top: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .copyright {
            color: #adb5bd;
            font-size: 0.9rem;
        }

        .copyright p {
            margin-bottom: 0.5rem;
        }

        .copyright strong {
            color: var(--secondary);
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #adb5bd;
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
        }

        /* ===== NOTIFICATIONS ===== */
        .notification-center {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }

        .notification {
            background: white;
            border-radius: var(--border-radius-sm);
            padding: 1.2rem 1.5rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid var(--primary);
            max-width: 400px;
            transform-origin: top right;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.error {
            border-left-color: var(--danger);
        }

        .notification.info {
            border-left-color: var(--primary);
        }

        .notification i {
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .notification.success i {
            color: var(--success);
        }

        .notification.error i {
            color: var(--danger);
        }

        .notification.info i {
            color: var(--primary);
        }

        .notification-content {
            flex: 1;
        }

        .notification-content p {
            margin: 0;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.1rem;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .notification-close:hover {
            background: var(--gray-light);
            color: var(--dark);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .header-info {
                width: 100%;
                justify-content: center;
            }
            
            .result-actions {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
            
            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }
            
            .footer-links {
                justify-content: center;
            }
            
            .converter-section {
                padding: 1rem;
            }
            
            .upload-area, .config-area {
                padding: 1.5rem;
            }
        }

        /* ===== LOADING ANIMATION ===== */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== FILE INFO ===== */
        .file-info-display {
            background: var(--light);
            border-radius: var(--border-radius-sm);
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid var(--gray-light);
            display: none;
        }

        .file-info-display.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .file-info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .file-info-item:last-child {
            margin-bottom: 0;
        }

        .file-name {
            font-weight: 600;
            color: var(--primary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 70%;
        }

        .file-size {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* ===== PROGRESS BAR ===== */
        .progress-container {
            margin-top: 1rem;
            display: none;
        }

        .progress-container.show {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
        }
    </style>
</head>
<body>
    <!-- Notification Center -->
    <div class="notification-center" id="notificationCenter"></div>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-mobile-alt"></i>
                <div>
                    <h1>XY2APK</h1>
                    <div class="tagline">Konversi HTML ke APK tanpa login - Gratis dan Lengkap</div>
                </div>
            </div>
            <div class="header-info">
                <div class="server-status" id="serverStatus">
                    <i class="fas fa-circle"></i>
                    <span>Mengecek server...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Converter Section -->
            <div class="converter-section">
                <!-- Upload Area -->
                <div class="upload-area">
                    <h2 class="section-title">
                        <i class="fas fa-cloud-upload-alt"></i>
                        Upload File
                    </h2>
                    
                    <!-- HTML File Upload -->
                    <div class="file-upload" id="htmlUploadBox">
                        <i class="fas fa-file-code"></i>
                        <h3>File HTML/ZIP</h3>
                        <p>Upload file HTML atau ZIP project website</p>
                        <small>Format: .html, .htm, .zip | Maksimal: 50MB</small>
                        <input type="file" id="htmlFileInput" accept=".html,.htm,.zip">
                    </div>
                    
                    <div class="file-info-display" id="htmlFileInfo">
                        <div class="file-info-item">
                            <span class="file-name" id="htmlFileName">-</span>
                            <span class="file-size" id="htmlFileSize">-</span>
                        </div>
                    </div>

                    <!-- Icon Upload -->
                    <div class="file-upload" id="iconUploadBox">
                        <i class="fas fa-image"></i>
                        <h3>Icon Aplikasi</h3>
                        <p>Upload icon aplikasi (opsional)</p>
                        <small>Format: PNG, JPG, GIF, WebP | Maksimal: 10MB</small>
                        <input type="file" id="iconFileInput" accept="image/*">
                    </div>
                    
                    <div class="file-info-display" id="iconFileInfo">
                        <div class="file-info-item">
                            <span class="file-name" id="iconFileName">-</span>
                            <span class="file-size" id="iconFileSize">-</span>
                        </div>
                    </div>

                    <!-- Icon Preview -->
                    <div class="icon-preview" id="iconPreview">
                        <p style="color: var(--gray); font-size: 0.9rem;">Preview icon akan muncul di sini</p>
                    </div>

                    <!-- Include Icon Checkbox -->
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeIcon" checked>
                        <label for="includeIcon">
                            <i class="fas fa-check-circle"></i>
                            Sertakan icon dalam APK
                        </label>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-text" id="progressText">0%</div>
                    </div>
                </div>

                <!-- Configuration Area -->
                <div class="config-area">
                    <h2 class="section-title">
                        <i class="fas fa-cogs"></i>
                        Konfigurasi APK
                    </h2>
                    
                    <!-- App Name -->
                    <div class="config-group">
                        <label for="appName">
                            <i class="fas fa-font"></i>
                            Nama Aplikasi
                        </label>
                        <input type="text" id="appName" placeholder="Contoh: Aplikasi Saya" value="Aplikasi Saya">
                    </div>
                    
                    <!-- Package Name -->
                    <div class="config-group">
                        <label for="packageName">
                            <i class="fas fa-box"></i>
                            Package Name
                        </label>
                        <input type="text" id="packageName" placeholder="com.nama.aplikasi" value="com.contoh.aplikasi">
                    </div>
                    
                    <!-- Version -->
                    <div class="config-group">
                        <label for="appVersion">
                            <i class="fas fa-code-branch"></i>
                            Versi
                        </label>
                        <input type="text" id="appVersion" placeholder="1.0.0" value="1.0.0">
                    </div>
                    
                    <!-- Permissions -->
                    <div class="config-group">
                        <label for="permissions">
                            <i class="fas fa-shield-alt"></i>
                            Izin Aplikasi
                        </label>
                        <select id="permissions">
                            <option value="minimal">Minimal (Internet)</option>
                            <option value="standard" selected>Standard (Internet, Penyimpanan)</option>
                            <option value="full">Lengkap (Semua Izin)</option>
                        </select>
                    </div>
                    
                    <!-- Features -->
                    <h3 style="margin: 1.5rem 0 1rem 0; color: var(--dark); font-size: 1.2rem;">
                        <i class="fas fa-sliders-h"></i>
                        Fitur Tambahan
                    </h3>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="splashScreen" checked>
                        <label for="splashScreen">
                            <i class="fas fa-play-circle"></i>
                            Splash Screen
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="fullscreen" checked>
                        <label for="fullscreen">
                            <i class="fas fa-expand-alt"></i>
                            Mode Layar Penuh
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="admob">
                        <label for="admob">
                            <i class="fas fa-ad"></i>
                            Dukungan AdMob
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="pushNotification">
                        <label for="pushNotification">
                            <i class="fas fa-bell"></i>
                            Push Notification
                        </label>
                    </div>
                </div>
            </div>

            <!-- Convert Button -->
            <div class="convert-btn-container">
                <button id="convertBtn">
                    <i class="fas fa-sync-alt"></i>
                    Konversi ke APK Sekarang
                </button>
                <p class="convert-note">
                    <i class="fas fa-info-circle"></i>
                    Proses konversi membutuhkan waktu beberapa detik. File Anda diproses secara aman dan tidak disimpan permanen.
                </p>
            </div>

            <!-- Result Section -->
            <div class="result-section" id="resultSection">
                <div class="result-header">
                    <h2 class="section-title">
                        <i class="fas fa-check-circle"></i>
                        APK Siap Didownload!
                    </h2>
                    <div class="success-badge">
                        <i class="fas fa-check"></i>
                        Berhasil Dikonversi
                    </div>
                </div>
                
                <div class="result-content">
                    <div class="apk-preview">
                        <div class="apk-icon" id="resultIcon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="apk-info">
                            <h3 id="resultAppName">Aplikasi Saya</h3>
                            <p id="resultPackage">com.contoh.aplikasi</p>
                            <p class="version">Versi <span id="resultVersion">1.0.0</span></p>
                            <p class="size">
                                <i class="fas fa-database"></i>
                                <span id="resultSize">2.0 MB</span>
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 1.5rem; color: var(--dark);">
                            <i class="fas fa-info-circle"></i>
                            Informasi APK
                        </h3>
                        
                        <p style="margin-bottom: 1.5rem; color: var(--gray);">
                            APK Anda telah berhasil dibuat! Download dan instal di perangkat Android.
                            Berikut detail aplikasi yang telah dibuat:
                        </p>
                        
                        <div class="result-details">
                            <h5><i class="fas fa-list-alt"></i> Detail Konversi</h5>
                            <ul>
                                <li>
                                    <strong>Build ID:</strong>
                                    <span id="buildId">XXXXXX</span>
                                </li>
                                <li>
                                    <strong>Waktu Proses:</strong>
                                    <span id="buildTime">3 detik</span>
                                </li>
                                <li>
                                    <strong>Fitur Dimasukkan:</strong>
                                    <span id="buildFeatures">Splash Screen, Fullscreen</span>
                                </li>
                                <li>
                                    <strong>Izin Aplikasi:</strong>
                                    <span id="buildPermissions">Internet, Penyimpanan</span>
                                </li>
                                <li>
                                    <strong>Icon:</strong>
                                    <span id="buildIcon">Tidak disertakan</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="result-actions">
                            <a href="#" class="action-btn download" id="downloadBtn">
                                <i class="fas fa-download"></i>
                                Download APK
                            </a>
                            <button class="action-btn share" id="shareBtn">
                                <i class="fas fa-share-alt"></i>
                                Bagikan
                            </button>
                            <button class="action-btn new" id="newBtn">
                                <i class="fas fa-redo"></i>
                                Buat Baru
                            </button>
                        </div>
                        
                        <div style="background: #f0f8ff; padding: 1.5rem; border-radius: var(--border-radius-sm); margin-top: 1.5rem; border-left: 4px solid var(--success);">
                            <h5 style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem; color: var(--dark);">
                                <i class="fas fa-mobile-alt"></i>
                                Cara Instal di Android
                            </h5>
                            <ol style="color: var(--gray); padding-left: 1.5rem; margin: 0;">
                                <li style="margin-bottom: 0.5rem;">Download file APK di atas</li>
                                <li style="margin-bottom: 0.5rem;">Buka File Manager di Android</li>
                                <li style="margin-bottom: 0.5rem;">Cari dan tap file APK yang didownload</li>
                                <li>Izinkan instalasi dari sumber tidak dikenal jika diminta</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div class="features-section">
                <h2 class="section-title">
                    <i class="fas fa-star"></i>
                    Keunggulan XY2APK
                </h2>
                <p style="color: var(--gray); margin-bottom: 2rem; font-size: 1.1rem;">
                    Platform konversi HTML ke APK terbaik dengan fitur lengkap dan tanpa ribet.
                </p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <h4>Tidak Perlu Login</h4>
                        <p>Gunakan langsung tanpa registrasi atau login. Privasi Anda terjaga dengan aman.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h4>Proses Super Cepat</h4>
                        <p>Konversi HTML ke APK hanya dalam hitungan detik dengan teknologi serverless modern.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h4>Konfigurasi Lengkap</h4>
                        <p>Kustomisasi nama, icon, versi, izin, dan fitur aplikasi sesuai kebutuhan Anda.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Keamanan Terjamin</h4>
                        <p>File Anda diproses secara aman dan tidak disimpan permanen di server kami.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h4>Upload Icon Custom</h4>
                        <p>Unggah icon aplikasi custom dalam berbagai format dengan preview langsung.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-infinity"></i>
                        </div>
                        <h4>Gratis Tanpa Batas</h4>
                        <p>Tidak ada batasan penggunaan. Konversi sebanyak yang Anda butuhkan, gratis selamanya!</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-info-circle"></i> Tentang XY2APK</h3>
                    <p>
                        Platform konversi HTML ke APK tanpa login yang cepat, aman, dan gratis. 
                        Dukung pengembang web untuk membuat aplikasi Android dengan mudah.
                    </p>
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 50px; font-size: 0.9rem;">
                            <i class="fas fa-bolt"></i> Cepat
                        </span>
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 50px; font-size: 0.9rem;">
                            <i class="fas fa-shield-alt"></i> Aman
                        </span>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-link"></i> Tautan Cepat</h3>
                    <a href="#"><i class="fas fa-question-circle"></i> FAQ & Bantuan</a>
                    <a href="#"><i class="fas fa-book"></i> Panduan Penggunaan</a>
                    <a href="#"><i class="fas fa-code"></i> Contoh File HTML</a>
                    <a href="#"><i class="fas fa-envelope"></i> Kontak & Dukungan</a>
                    <a href="#"><i class="fas fa-bug"></i> Laporkan Masalah</a>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-code"></i> Teknologi</h3>
                    <p>Dibangun dengan teknologi modern untuk performa terbaik:</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 1rem;">
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 4px; font-size: 0.85rem;">
                            Node.js 24
                        </span>
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 4px; font-size: 0.85rem;">
                            Vercel
                        </span>
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 4px; font-size: 0.85rem;">
                            HTML5
                        </span>
                        <span style="background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 4px; font-size: 0.85rem;">
                            CSS3
                        </span>
                    </div>
                    <p class="powered-by">
                        <i class="fas fa-heart"></i>
                        Powered by <strong>Kell</strong>
                    </p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="copyright">
                    <p>&copy; 2023 XY2APK - Konversi HTML ke APK Tanpa Login. All rights reserved.</p>
                    <p>Deployed on Vercel Serverless Platform â€¢ Node.js 24.x â€¢ Real-time Processing</p>
                </div>
                <div class="footer-links">
                    <a href="#">Syarat Penggunaan</a>
                    <a href="#">Kebijakan Privasi</a>
                    <a href="#">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // XY2APK Application
        class XY2APKConverter {
            constructor() {
                this.htmlFile = null;
                this.iconFile = null;
                this.currentAPK = null;
                this.isProcessing = false;
                
                this.init();
            }
            
            init() {
                this.bindEvents();
                this.checkServerHealth();
                this.setupAutoGenerate();
                console.log('XY2APK Converter initialized');
            }
            
            bindEvents() {
                // HTML File Upload
                const htmlUploadBox = document.getElementById('htmlUploadBox');
                const htmlFileInput = document.getElementById('htmlFileInput');
                
                htmlUploadBox.addEventListener('click', () => {
                    htmlFileInput.click();
                });
                
                htmlFileInput.addEventListener('change', (e) => {
                    this.handleFileSelect(e.target.files[0], 'html');
                });
                
                // Icon File Upload
                const iconUploadBox = document.getElementById('iconUploadBox');
                const iconFileInput = document.getElementById('iconFileInput');
                
                iconUploadBox.addEventListener('click', () => {
                    iconFileInput.click();
                });
                
                iconFileInput.addEventListener('change', (e) => {
                    this.handleFileSelect(e.target.files[0], 'icon');
                });
                
                // Convert Button
                const convertBtn = document.getElementById('convertBtn');
                convertBtn.addEventListener('click', () => {
                    this.convertToAPK();
                });
                
                // Download Button
                const downloadBtn = document.getElementById('downloadBtn');
                downloadBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.downloadAPK();
                });
                
                // Share Button
                const shareBtn = document.getElementById('shareBtn');
                shareBtn.addEventListener('click', () => {
                    this.shareAPK();
                });
                
                // New Button
                const newBtn = document.getElementById('newBtn');
                newBtn.addEventListener('click', () => {
                    this.resetForm();
                });
            }
            
            setupAutoGenerate() {
                const appNameInput = document.getElementById('appName');
                const packageInput = document.getElementById('packageName');
                
                appNameInput.addEventListener('input', (e) => {
                    if (packageInput.value === 'com.contoh.aplikasi' || !packageInput.value) {
                        const name = e.target.value
                            .toLowerCase()
                            .replace(/[^a-z0-9]/g, '')
                            .substring(0, 12);
                        
                        if (name) {
                            packageInput.value = `com.${name}.app`;
                        }
                    }
                });
            }
            
            handleFileSelect(file, type) {
                if (!file) return;
                
                const maxSize = type === 'html' ? 50 * 1024 * 1024 : 10 * 1024 * 1024;
                
                if (file.size > maxSize) {
                    this.showNotification(
                        `Ukuran file ${type === 'html' ? 'HTML' : 'icon'} terlalu besar. Maksimal ${type === 'html' ? '50MB' : '10MB'}.`,
                        'error'
                    );
                    return;
                }
                
                if (type === 'html') {
                    // Validate HTML/ZIP file
                    const validTypes = ['text/html', 'application/zip'];
                    const validExts = ['.html', '.htm', '.zip'];
                    const fileExt = file.name.toLowerCase().slice(-4);
                    
                    if (!validTypes.includes(file.type) && !validExts.includes(fileExt)) {
                        this.showNotification('Hanya file HTML atau ZIP yang diperbolehkan.', 'error');
                        return;
                    }
                    
                    this.htmlFile = file;
                    this.updateFileInfo(file, 'html');
                    this.showNotification(`File "${file.name}" siap dikonversi.`, 'success');
                    
                } else if (type === 'icon') {
                    // Validate image file
                    if (!file.type.startsWith('image/')) {
                        this.showNotification('Hanya file gambar yang diperbolehkan untuk icon.', 'error');
                        return;
                    }
                    
                    this.iconFile = file;
                    this.updateFileInfo(file, 'icon');
                    this.previewIcon(file);
                    this.showNotification(`Icon "${file.name}" berhasil diupload.`, 'success');
                }
            }
            
            updateFileInfo(file, type) {
                const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
                
                if (type === 'html') {
                    document.getElementById('htmlFileName').textContent = file.name;
                    document.getElementById('htmlFileSize').textContent = `${sizeInMB} MB`;
                    document.getElementById('htmlFileInfo').classList.add('show');
                } else {
                    document.getElementById('iconFileName').textContent = file.name;
                    document.getElementById('iconFileSize').textContent = `${sizeInMB} MB`;
                    document.getElementById('iconFileInfo').classList.add('show');
                }
            }
            
            previewIcon(file) {
                const reader = new FileReader();
                const iconPreview = document.getElementById('iconPreview');
                const resultIcon = document.getElementById('resultIcon');
                
                reader.onload = (e) => {
                    iconPreview.innerHTML = `<img src="${e.target.result}" alt="Icon Preview">`;
                    resultIcon.innerHTML = `<img src="${e.target.result}" alt="App Icon">`;
                };
                
                reader.readAsDataURL(file);
            }
            
            async convertToAPK() {
                // Validation
                if (!this.htmlFile) {
                    this.showNotification('Harap upload file HTML/ZIP terlebih dahulu.', 'error');
                    return;
                }
                
                const appName = document.getElementById('appName').value.trim();
                const packageName = document.getElementById('packageName').value.trim();
                const version = document.getElementById('appVersion').value.trim();
                
                if (!appName) {
                    this.showNotification('Harap isi nama aplikasi.', 'error');
                    document.getElementById('appName').focus();
                    return;
                }
                
                if (!packageName || !packageName.includes('.')) {
                    this.showNotification('Harap isi package name yang valid (contoh: com.nama.aplikasi).', 'error');
                    document.getElementById('packageName').focus();
                    return;
                }
                
                if (this.isProcessing) return;
                this.isProcessing = true;
                
                // Show progress
                const convertBtn = document.getElementById('convertBtn');
                const originalText = convertBtn.innerHTML;
                convertBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memproses...';
                convertBtn.disabled = true;
                
                // Show progress bar
                const progressContainer = document.getElementById('progressContainer');
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                progressContainer.classList.add('show');
                
                // Simulate progress
                this.simulateProgress(progressFill, progressText, () => {
                    // After progress completes
                    this.performConversion(appName, packageName, version)
                        .finally(() => {
                            // Reset button
                            convertBtn.innerHTML = originalText;
                            convertBtn.disabled = false;
                            this.isProcessing = false;
                            
                            // Hide progress
                            setTimeout(() => {
                                progressContainer.classList.remove('show');
                                progressFill.style.width = '0%';
                                progressText.textContent = '0%';
                            }, 500);
                        });
                });
            }
            
            simulateProgress(progressFill, progressText, callback) {
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 100) progress = 100;
                    
                    progressFill.style.width = `${progress}%`;
                    progressText.textContent = `${Math.round(progress)}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(callback, 300);
                    }
                }, 200);
            }
            
            async performConversion(appName, packageName, version) {
                try {
                    // Get configuration
                    const features = [];
                    if (document.getElementById('splashScreen').checked) features.push('splash');
                    if (document.getElementById('fullscreen').checked) features.push('fullscreen');
                    if (document.getElementById('admob').checked) features.push('admob');
                    if (document.getElementById('pushNotification').checked) features.push('push');
                    
                    const permissions = document.getElementById('permissions').value;
                    const includeIcon = document.getElementById('includeIcon').checked && this.iconFile;
                    
                    // Prepare request data
                    const requestData = {
                        appName,
                        packageName,
                        version,
                        features,
                        permissions,
                        includeIcon: !!includeIcon
                    };
                    
                    console.log('Sending conversion request:', requestData);
                    
                    // Call API
                    const response = await fetch('/api/convert', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.currentAPK = data.apkInfo;
                        this.displayResult(data.apkInfo);
                        this.showNotification('APK berhasil dibuat!', 'success');
                    } else {
                        throw new Error(data.error || 'Konversi gagal');
                    }
                    
                } catch (error) {
                    console.error('Conversion error:', error);
                    this.showNotification(`Gagal membuat APK: ${error.message}`, 'error');
                }
            }
            
            displayResult(apkInfo) {
                // Update result display
                document.getElementById('resultAppName').textContent = apkInfo.appName;
                document.getElementById('resultPackage').textContent = apkInfo.packageName;
                document.getElementById('resultVersion').textContent = apkInfo.version;
                document.getElementById('resultSize').textContent = this.formatFileSize(apkInfo.size);
                document.getElementById('buildId').textContent = apkInfo.id;
                document.getElementById('buildTime').textContent = '3 detik'; // Simulated
                
                // Update features
                const featureNames = {
                    'splash': 'Splash Screen',
                    'fullscreen': 'Fullscreen',
                    'admob': 'AdMob',
                    'push': 'Push Notification'
                };
                const featuresText = apkInfo.features.map(f => featureNames[f] || f).join(', ') || 'Tidak ada';
                document.getElementById('buildFeatures').textContent = featuresText;
                
                // Update permissions
                const permissionNames = {
                    'minimal': 'Internet',
                    'standard': 'Internet, Penyimpanan',
                    'full': 'Semua Izin'
                };
                document.getElementById('buildPermissions').textContent = permissionNames[apkInfo.permissions] || apkInfo.permissions;
                
                // Update icon status
                document.getElementById('buildIcon').textContent = apkInfo.hasIcon ? 'Disertakan' : 'Tidak disertakan';
                
                // Update download button
                const downloadBtn = document.getElementById('downloadBtn');
                downloadBtn.href = apkInfo.downloadUrl;
                downloadBtn.setAttribute('data-download-url', apkInfo.downloadUrl);
                
                // Show result section
                const resultSection = document.getElementById('resultSection');
                resultSection.classList.add('show');
                
                // Scroll to result
                setTimeout(() => {
                    resultSection.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'center'
                    });
                }, 100);
            }
            
            downloadAPK() {
                if (!this.currentAPK) {
                    this.showNotification('Buat APK terlebih dahulu.', 'error');
                    return;
                }
                
                const downloadUrl = this.currentAPK.downloadUrl;
                console.log('Downloading:', downloadUrl);
                
                // Create a temporary link for download
                const link = document.createElement('a');
                link.href = downloadUrl;
                link.download = this.currentAPK.filename;
                link.target = '_blank';
                
                // Append to body, click, and remove
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                this.showNotification('Download APK dimulai...', 'success');
                
                // Log download event
                console.log('APK downloaded:', {
                    filename: this.currentAPK.filename,
                    appName: this.currentAPK.appName,
                    timestamp: new Date().toISOString()
                });
            }
            
            shareAPK() {
                if (!this.currentAPK) {
                    this.showNotification('Buat APK terlebih dahulu.', 'error');
                    return;
                }
                
                const shareText = `Saya baru saja membuat aplikasi Android "${this.currentAPK.appName}" menggunakan XY2APK! Coba buat aplikasimu juga: ${window.location.href}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Aplikasi Android Saya',
                        text: shareText,
                        url: window.location.href
                    }).catch(() => {
                        this.copyToClipboard(shareText);
                    });
                } else {
                    this.copyToClipboard(shareText);
                }
            }
            
            async copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                    this.showNotification('Link berhasil disalin ke clipboard!', 'success');
                } catch (err) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showNotification('Link berhasil disalin!', 'success');
                }
            }
            
            resetForm() {
                // Reset file inputs
                this.htmlFile = null;
                this.iconFile = null;
                
                // Reset file displays
                document.getElementById('htmlFileInfo').classList.remove('show');
                document.getElementById('iconFileInfo').classList.remove('show');
                document.getElementById('iconPreview').innerHTML = '<p style="color: var(--gray); font-size: 0.9rem;">Preview icon akan muncul di sini</p>';
                document.getElementById('resultIcon').innerHTML = '<i class="fas fa-mobile-alt"></i>';
                
                // Reset file inputs
                document.getElementById('htmlFileInput').value = '';
                document.getElementById('iconFileInput').value = '';
                
                // Reset form values
                document.getElementById('appName').value = 'Aplikasi Saya';
                document.getElementById('packageName').value = 'com.contoh.aplikasi';
                document.getElementById('appVersion').value = '1.0.0';
                document.getElementById('permissions').value = 'standard';
                document.getElementById('splashScreen').checked = true;
                document.getElementById('fullscreen').checked = true;
                document.getElementById('admob').checked = false;
                document.getElementById('pushNotification').checked = false;
                document.getElementById('includeIcon').checked = true;
                
                // Hide result section
                document.getElementById('resultSection').classList.remove('show');
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                this.showNotification('Form telah direset. Buat APK baru!', 'info');
            }
            
            async checkServerHealth() {
                try {
                    const response = await fetch('/api/health');
                    const data = await response.json();
                    
                    const statusElement = document.getElementById('serverStatus');
                    if (data.status === 'healthy') {
                        statusElement.innerHTML = '<i class="fas fa-circle"></i> Server Online';
                        statusElement.style.color = '#4cc9f0';
                    }
                } catch (error) {
                    console.log('Server health check failed, running in simulation mode');
                    const statusElement = document.getElementById('serverStatus');
                    statusElement.innerHTML = '<i class="fas fa-circle"></i> Simulation Mode';
                    statusElement.style.color = '#f8961e';
                }
            }
            
            showNotification(message, type = 'info') {
                const notificationCenter = document.getElementById('notificationCenter');
                if (!notificationCenter) return;
                
                // Remove existing notifications
                const existingNotifications = notificationCenter.querySelectorAll('.notification');
                if (existingNotifications.length > 3) {
                    existingNotifications[0].remove();
                }
                
                // Create notification
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                
                notification.innerHTML = `
                    <i class="fas ${icons[type] || 'fa-info-circle'}"></i>
                    <div class="notification-content">
                        <p>${message}</p>
                    </div>
                    <button class="notification-close">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                notificationCenter.appendChild(notification);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.style.animation = 'slideInRight 0.3s ease reverse';
                        setTimeout(() => notification.remove(), 300);
                    }
                }, 5000);
                
                // Close button
                const closeBtn = notification.querySelector('.notification-close');
                closeBtn.addEventListener('click', () => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse';
                    setTimeout(() => notification.remove(), 300);
                });
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        }
        
        // Initialize application
        document.addEventListener('DOMContentLoaded', () => {
            window.xy2apk = new XY2APKConverter();
            
            // Add some animation effects
            const elements = document.querySelectorAll('.feature-card, .upload-area, .config-area');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            console.log('XY2APK fully loaded and ready!');
        });
        
        // Global helper functions
        window.formatFileSize = function(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        };
    </script>
</body>
</html>
